<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }} - ELHERAFEEN</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container header-wrapper">
            <a href="/" class="logo">ELHERAFEEN</a>
            <div class="nav-icons">
                <a href="/" class="nav-icon" style="font-size:1rem; text-decoration:none">Home</a>
                <button class="nav-icon"><i class="fas fa-shopping-cart"></i></button>
            </div>
        </div>
    </header>

    <div class="container" style="padding-top:2rem; padding-bottom:4rem;">
        <nav class="breadcrumb">
            <a href="/">Home</a> <span>/</span>
            <span>{{ product.category }}</span> <span>/</span>
            <span style="color:var(--text-main); font-weight:500">{{ product.name }}</span>
        </nav>

        <div class="detail-container">
            <!-- Left: Images -->
            <div>
                {% set icons = {'Engine': 'fa-cogs', 'Brakes': 'fa-compact-disc', 'Electrical': 'fa-bolt', 'Suspension': 'fa-spring', 'Cooling': 'fa-fan', 'Fluids': 'fa-oil-can'} %}
                {% set colors = {'Engine': 'bg-gray-200', 'Brakes': 'bg-red-50', 'Electrical': 'bg-yellow-50', 'Suspension': 'bg-blue-50', 'Cooling': 'bg-cyan-50', 'Fluids': 'bg-amber-50'} %}
                
                <div class="detail-img-box {{ colors[product.category] }}">
                    <i class="fas {{ icons[product.category] or 'fa-box' }} detail-icon"></i>
                    <span class="card-badge" style="top:1rem; left:1rem; right:auto;">{{ product.condition }}</span>
                </div>
                <div class="thumbnails">
                    <div class="thumb"><i class="fas fa-camera"></i></div>
                    <div class="thumb"><i class="fas fa-box-open"></i></div>
                    <div class="thumb"><i class="fas fa-tag"></i></div>
                </div>
            </div>

            <!-- Right: Info -->
            <div class="detail-info">
                <div class="brand-text" style="color:var(--primary-color); font-size:0.875rem;">{{ product.brand }}</div>
                <h1 class="detail-title">{{ product.name }}</h1>
                <div class="rating">
                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                    <span style="color:#6b7280; margin-left:0.5rem">({{ product.sold_count }} sold)</span>
                    <span style="color:#d1d5db; margin:0 0.5rem">|</span>
                    <span style="color:#6b7280">OEM: <b>{{ product.oem }}</b></span>
                </div>

                <div class="detail-price">{{ product.price }} <span class="currency" style="font-size:1.25rem">{{ product.currency }}</span></div>

                <div class="description">
                    <p>{{ product.description }}</p>
                </div>

                <div class="actions">
                    <div class="qty-row">
                        <div class="qty-selector">
                            <button class="qty-btn" onclick="updateQty(-1)">-</button>
                            <span id="qty" class="qty-val">1</span>
                            <button class="qty-btn" onclick="updateQty(1)">+</button>
                        </div>
                        <div class="stock-status"><i class="fas fa-check-circle"></i> In Stock ({{ product.stock }})</div>
                    </div>

                    <div class="cart-row">
                        <button class="btn-add"><i class="fas fa-shopping-cart"></i> Add to Cart</button>
                        <button style="width:50px; border:1px solid #d1d5db; border-radius:0.5rem; color:#4b5563"><i class="far fa-heart"></i></button>
                    </div>
                    <button class="btn-buy">Buy Now</button>
                </div>
                
                <div style="margin-top:2rem; padding-top:1.5rem; border-top:1px solid #f3f4f6; color:#6b7280; font-size:0.875rem; display:flex; flex-direction:column; gap:0.75rem;">
                    <div><i class="fas fa-truck" style="width:20px"></i> Free shipping on orders over 1000 EGP</div>
                    <div><i class="fas fa-undo" style="width:20px"></i> 30-Day Returns Policy</div>
                    <div><i class="fas fa-shield-alt" style="width:20px"></i> 1 Year Warranty included</div>
                </div>
            </div>
        </div>

        <div class="features-box">
            <div class="tabs">
                <div class="tab active">Description</div>
                <div class="tab">Specifications</div>
                <div class="tab">Reviews (3)</div>
            </div>
            <div class="tab-content">
                <h3 style="margin-top:0;">Product Description</h3>
                <p>{{ product.description }}</p>
                <p>The {{ product.brand }} {{ product.name }} is engineered to meet or exceed OEM specifications. Designed for durability and performance.</p>
                
                <h3>Key Features</h3>
                <ul style="padding-left:1.5rem">
                    <li>Brand: {{ product.brand }}</li>
                    <li>Type: {{ product.type }}</li>
                    <li>Category: {{ product.category }}</li>
                    <li>Condition: {{ product.condition }}</li>
                    <li>Seller: {{ product.seller_name }}</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function updateQty(change) {
            const el = document.getElementById('qty');
            let val = parseInt(el.textContent);
            val = Math.max(1, Math.min(val + change, {{ product.stock }}));
            el.textContent = val;
        }
    </script>
</body>
</html>